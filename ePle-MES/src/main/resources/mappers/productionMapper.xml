<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!-- productionMapper.xml -->
<mapper namespace="com.itwillbs.mapper.productionMapper">
	<select id="getInstruction" resultType="com.production.domain.instructionVO">
		SELECT * FROM INSTRUCTION
	</select>
	<select id="getProduct" resultType="String">
		SELECT DISTINCT product FROM INSTRUCTION
	</select>
	<select id="getLine_code" resultType="String">
		SELECT DISTINCT line_code FROM INSTRUCTION
	</select>
	<select id="getRequest" resultType="String">
		SELECT DISTINCT request FROM INSTRUCTION
	</select>
	<select id="ajaxSearch" parameterType="hashmap" resultType="com.production.domain.instructionVO">
		SELECT * FROM INSTRUCTION WHERE 1 = 1 
		<if test="product != null">
			AND product IN
			<foreach collection="product" item="arr" open="(" close=")" separator=",">
				#{arr}
			</foreach>
		</if>
		<if test="line_code != null">
			 AND line_code IN
			<foreach collection="line_code" item="arr" open="(" close=")" separator=",">
				#{arr}
			</foreach>
		</if>
		<if test="request != null">
			 AND request IN
			<foreach collection="request" item="arr" open="(" close=")" separator=",">
				#{arr}
			</foreach>
		</if>
	</select>
	<select id="getrequestList" resultType="String">
		SELECT code FROM REQUEST WHERE status = '등록'
	</select>
	<select id="getLine_codeList" resultType="String">
		SELECT code FROM REQUEST WHERE status = '등록'
	</select>

</mapper>